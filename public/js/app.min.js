var _$windowWidth,_$windowHeight,_$windowTopPos,_$windowBottomPos,_$LoadOnceSafety=!1,myApp=angular.module("myApp",["ngAnimate","ngSanitize"]).filter("trustAsResourceUrl",["$sce",function(e){return function(t){return e.trustAsResourceUrl(t)}}]).controller("myProjects",["$scope","$http","$sce",function(e,t,r){e.trustSrc=function(e){return r.trustAsResourceUrl(e)},t({method:"GET",url:"https://spreadsheets.google.com/feeds/list/1LjdZTcQD3IiaL55n-W1PN2naSrYEN0THl5KKe7HlTiI/od6/public/values?alt=json"}).success(function(t){if(!_$LoadOnceSafety){if(_$LoadOnceSafety=!0,_CreateFilterDB(t.feed.entry[1],t.feed.entry[2],t.feed.entry[3]),_CreateDataFromSpreadSheet(t),e.myProjects=_$sortedProjects,"top"==_$currentPageType)setTimeout(_CreateAnimationAndEventsToProjects,200);else{_$singleProjectData=_GetProjectFromNameID(window.location.hash.substr(2)),e.myProject=_$singleProjectData;for(var r=[],o=[],n=[],i=0;i<_$singleProjectData.cat.length;){var a=i;i=c(_$catArray,r,i),i=c(_$roleArray,o,i),a==(i=c(_$softArray,n,i))&&i++}function c(e,t,r){for(var o=0;o<e.length;){if(e[o].nameid==_convertStringToID(_$singleProjectData.cat[r]))return t.push(e[o]),++r;o++}return r}e.myCategories=r,e.myRoles=o,e.mySoftwares=n,0==_$singleProjectData.visuals.resources.length&&$(".projectVideo").remove(),""!==_$singleProjectData.special?$(".projectSpecialContent").append(_$singleProjectData.special):$(".projectSpecialContent").remove()}if("top"==_$currentPageType?e.myPageTitle="OPTMYST":e.myPageTitle=_$singleProjectData.title,e.myFiltersCat=_$catArray,e.myFiltersRole=_$roleArray,"top"==_$currentPageType&&0!=isYoutube(_$youtubeUrl)?e.youtubeUrl={src:"http://www.youtube.com/embed/"+isYoutube(_$youtubeUrl)+"?autoplay=0&controls=1&showinfo=0"}:$("#videocontainer").remove(),""!==window.location.hash.replace("#","")||!1===isFirstTime);else var s=0,l=setInterval(function(){s<1?s++:clearInterval(l)},2e3);setTimeout(_JustLoaded,200),_PerPageJustLoaded(),_$isMobile||$(window).bind("mousewheel",function(e){if(_$scrollDirection=e.originalEvent.wheelDelta,"top"==_$currentPageType){if(_$filterIsOpened)return void e.preventDefault();if(_$bAnimation&&_$heroCounter<_$heroCount)return void e.preventDefault();if(_$bAnimation&&_$heroCounter==_$heroCount)return void e.preventDefault();if(_$heroCounter>_$heroCount&&$("#projectContainer").scrollTop()>0)return void($("#projectContainer").scrollTop()>0&&(_$bAnimation=!0,_ScrollTimeOut(2500)))}Math.abs(_$scrollDirection)>_$scrollInterval&&(_$bAnimation=!0),_ScrollFunction()}),_$isMobile&&(document.addEventListener("touchstart",handleTouchStart,!1),document.addEventListener("touchmove",handleTouchMove,!1)),$(window).resize(function(){null!=_$resizetimeout&&clearTimeout(_$resizetimeout),_$resizetimeout=setTimeout(function(){_WindowResized()},300)})}}),e.loadProjectPage=function(e){"top"==_$currentPageType?_linkFromFooter(_convertStringToID(e),!1,!1):(window.location.hash=_convertStringToID(e),window.location.reload())},e.loadCategoryPage=function(e){_linkFromFooter(_convertStringToID(e),!1,!0)},e.linkToHome=function(){_linkFromFooter(!1,!0,"top"==_$currentPageType)},e.sortProject=function(e,t){"top"==_$currentPageType?(_SortProjectByFilter(t),_HasClass(e.currentTarget,"footerProjectFilterList")&&window.location.reload()):"project"==_$currentPageType&&_linkFromFooter(t.nameid,!0,"top"==_$currentPageType)}}]),_$windowTopPosOld=-1,_$scrollDirection=0,_$bAnimation=!1,_$scrollInterval=80,isFirstTime=!1,_$isMobile=!1;function _JustLoaded(){_WindowResized(),setTimeout(_ScrollFunction,1200),$("footer").css({visibility:"visible"}).removeClass("closed").addClass("opened"),$("#linktoback").click(function(){window.history.back()}),_$isMobile&&"project"==_$currentPageType&&$(window).scrollTop(),_$isMobile&&_$currentPageType}function _ScrollFunction(){_$windowTopPos=$(window).scrollTop(),_$windowBottomPos=_$windowTopPos+_$windowHeight,"top"==_$currentPageType&&(Math.abs(_$scrollDirection)>0&&movePage(),$(".heroProject").addClass("animate")),"project"==_$currentPageType&&_$singleProjectData.visuals.resources.length>0&&$(".projectVisuals").addClass("inViewPort inViewPortAlready"),_$windowTopPosOld=_$windowTopPos}/Android|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)&&(_$isMobile=!0);var _$resizetimeout=!1;function _WindowResized(){_$windowHeight=$(window).height(),_$windowWidth=$(window).width(),adjustSize_perPage()}function _linkFromFooter(e,t,r){var o="",n="",i=getParam("type");"project"!=_$currentPageType||r||(o="index.html"),"top"!=_$currentPageType||r||(o="project.html"),!0===t&&$.cookie("visited",null),e&&(n="#"+e),i?o=o+"?type="+getParam("type")+n:o+=n,window.location.href=o}var _$youtubeUrl,_$clientlist,_$projects=[],_$sortedProjects=[];function _CreateDataFromSpreadSheet(e){var t=$_GET("type");_$youtubeUrl=e.feed.entry[4].gsx$content.$t;for(var r=parseInt(e.feed.entry[5].gsx$content.$t),o=6;o<6+12*r;o+=12){var n="y";if("mkkpn"===t||!1===t?n=e.feed.entry[o].gsx$mkkpn.$t:"pgwyqzbbop"===t?n=e.feed.entry[o].gsx$pgwyqzbbop.$t:"buhacthlh"===t?n=e.feed.entry[o].gsx$buhacthlh.$t:"ylagyf"===t?n=e.feed.entry[o].gsx$ylagyf.$t:"epanz"===t?n=e.feed.entry[o].gsx$epanz.$t:"gacdpe"===t&&(n=e.feed.entry[o].gsx$gacdpe.$t),""!==n){var i={};i.buttonid="_to"+_convertStringToID(String(e.feed.entry[o].gsx$content.$t))+"Button",i.id=_convertStringToID(String(e.feed.entry[o].gsx$content.$t)),i.title=String(e.feed.entry[o].gsx$content.$t),i.subtitle=String(e.feed.entry[1+o].gsx$content.$t),i.client=String(e.feed.entry[2+o].gsx$content.$t),i.year=String(e.feed.entry[3+o].gsx$content.$t),i.status=String(e.feed.entry[4+o].gsx$content.$t),i.header=String(e.feed.entry[6+o].gsx$content.$t),i.desc=String(e.feed.entry[7+o].gsx$content.$t),""==i.client&&""==i.year&&""==i.status&&($("#informationList").hide(),$(".informationDescription").css({width:"100%"})),i.cat=_ConvertStringToArray(e.feed.entry[8+o].gsx$content.$t,!1);for(var a=0;a<i.cat.length;a++)if(_$activeFilterObjects.length>0){for(var c=0,s=!0;c<_$activeFilterObjects.length;)_$activeFilterObjects[c].nameid==_convertStringToID(i.cat[a])?(s=!1,c=_$activeFilterObjects.length):c++;s&&_$activeFilterObjects.push(_ReturnFilterObject(_convertStringToID(i.cat[a])))}else _$activeFilterObjects.push(_ReturnFilterObject(_convertStringToID(i.cat[a])));var l=_ConvertStringToArray(e.feed.entry[9+o].gsx$content.$t);i.thumb1=i.thumb2=l[0],l.length>1&&(i.thumb2=l[1]),""!=e.feed.entry[10+o].gsx$content.$t?i.visuals=JSON.parse(e.feed.entry[10+o].gsx$content.$t):i.visuals={resources:[]},i.special=e.feed.entry[11+o].gsx$content.$t,_$projects.push(i)}0}var _=[];for(o=0;o<_$activeFilterObjects.length;o++){a=0;for(var u=!0;a<_$catArray.length;)_$activeFilterObjects[o]==_$catArray[a]?(u=!1,a=_$catArray.length):a++;u||_.push(_$catArray.splice(_$catArray.indexOf(_$activeFilterObjects[o]),1)[0])}for(_$catArray=_,_=[],o=0;o<_$activeFilterObjects.length;o++){for(a=0,u=!0;a<_$roleArray.length;)_$activeFilterObjects[o]==_$roleArray[a]?(u=!1,a=_$roleArray.length):a++;u||_.push(_$roleArray.splice(_$roleArray.indexOf(_$activeFilterObjects[o]),1)[0])}for(_$roleArray=_,_=[],o=0;o<_$activeFilterObjects.length;o++){for(a=0,u=!0;a<_$softArray.length;)_$activeFilterObjects[o]==_$softArray[a]?(u=!1,a=_$softArray.length):a++;u||_.push(_$softArray.splice(_$softArray.indexOf(_$activeFilterObjects[o]),1)[0])}_$softArray=_,_$sortedProjects=_$projects}